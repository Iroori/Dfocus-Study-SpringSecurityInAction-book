# 1장 오늘날의 보안

## 이 단원의 내용

- 스프링 시큐리티의 개념과 이를 이용해 해결할 수 있는 문제
- 소프트웨어 애플리케이션에서 보안의 의미
- 소프트웨어 보안이 중요한 이유와 관심을 가져야 하는 이유
- 애플리케이션 수준의 일반적인 취약성

### 소주제

스프링 시큐리티의 개념과 장점

키워드

관련 질문

### 노트

- 스프링 시큐리티를 스프링의 방식으로 어플리케이션 수준의 보안을 적용할 수 있다.
    - 스프링 방식 : 어노테이션, 빈, SqEL(Spring Expression Language)
- 어플리케이션 수준의 보안을 구현 할 수 있게 해주는 프레임워크
- 스프링 시큐리티의 다른 대안 : 아파치 시로(하지만 너무 가벼운 형태의 보안)

<aside>
📌 **요약: 스프링 시큐리티는 스프링에 어플리케이션 급 보안을 위해 만들어진 프레임워크다.**

</aside>

### 소주제

소프트웨어 보안

키워드

관련 질문

### 노트

- 보안은 사용자에 따라 그 중요도가 바뀐다.
- 자신의 위치 이전의 보안은 신경쓰지 말고 보안을 생각해야 한다.
- 

<aside>
📌 **요약: 보안은 광범위하다. 어플리케이션 이전의 보안에 연연하지 말고 보안을 쌓아야한다.**

</aside>

### 소주제

보안이 중요한 이유

키워드

관련 질문

### 노트

- 사용자 관점에서 보면 보안의 중요성을 알 수 있다.
- 보안은 사고 이후의 처리보다 미리 대책을 세우는 것이 싸다.

<aside>
📌 **요약: 사**용자 관점에서 보면 보안의 중요성을 알 수 있다.

</aside>

### 소주제

웹 애플리케이션의 일반적인 보안 취약성

키워드

관련 질문

### 노트

- 취약성은 악의적 의도를 가지고 원치 않는 작업을 수행하는 데 이용할 수 있는 약점이다.
- 일반적인 취약성 목록
    - 인증 취약성
        - 악의를 가지고 다른 사람의 기능이나 데이터에 접근 할 수 있다는 의
        - 인증(Authentication) : 애플리케이션이 이를 이용하려는 사람을 식별하는 프로세스
        - 권한(Authorization) : 인증된 호출자가 특정 기능과 데이터에 대한 이용 권리가 있는지 확인하는 프로세스
    - 세션 고정
        - 세션고정 (Session fⅸation) 취약성은 웹 애플리케이션의 더구체적이고 심각한 약점
        - 이미 생성된 세션 ID를 이용해 유효한 사용자를 가장한다.
        - 악용하기 위해서는 유효한 세션ID와 피해자의 브라우저가 이를 이용하게 해야한다.
    - XSS 교차 사이트 스크립팅
        - XSS(교차 사이트 스크립팅)는 서버에 노출된 웹 서비스로 클라이언트 쪽 스크립트를 주입해 다른 사용자가 이를 실행하도록 하는 공격
        - 원치 않는 외래 스크립트의 실행을 방지하기 위해 이용하기 전이나 심지어 저장하기 전에도 요청을 적절하게 ‘소독’하는 과정이 필요하다.
        - 이 취약성이 악용되면 계정 가장(세션 고정과 결힙) 이나 DDoS와 같은 분산 공격 참여 등의 결과가 발생
    - CSRF 사이트 간 요청 위조
        - CSRF(사이트 간 요청 위조)도 웹애플리케이션에흔한취약성
        - CSRF를 통해 동작을 숨겨서 사용자가 서버에서 원치 않는 동작을 실행하도록 할 수 있다.
    - 주입
        - 주입공격은광범위한공격방식
        - 시스템에 특정 데이터를 유입하는 취약성을 이용
        - XSS도 주입 취약성의 하나로 볼 수 있다.
        - 주입 공격은 시스템에 피해를 가할 목적의 클라이언트 쪽 스크립트를 주입한다. 다른 예로는 SQL 주입, XPath 주입, ○S 명령 주입, LDAP 주입 등이 있다
    - 기밀 데이터 노출
        - 기밀 데이터 공개는 복잡성 측면에서 가장 기초적이고 단순한 취약성 같지만, 여전히 흔한 실수 증 하나로 남아 있다
        - 실제 개발된 시스템에서는 모든 환경에서 이러한 민감한 키 값을 볼 수 없어야 하고적어도 운영환경에서는 소수의 사람만 개인 데이터에 접근할 수 있어야 한다.
        - console log, splunk, elasticsearch 같은 DB 저장 로그도 조심해야 한다.
        - 단순해 보이는 로그에서도 그 데이터가 많아지면 조합하여 취약점을 찾을 수 있다.
    - 메소드 접근 제어 부족
        - 애플리케이션수준에도 한 계층에만 권한 부여를 적용하면 안된다. 때에 따라서는 특정 기능을 아예 호출할 수 없게 해야 한다
        - 애플리케이션의 모든 계층에 권한 부여를 적용해야 한다
    - 알려진 취약성이 있는 종속성 이용
        - 우리가 이용하는 종속성은 스프링 시큐리티와 직접적인 연관은 없지만 애플리케이션 수준 보안의 중요한 부분이며 주의가 필요
        - 개발하는 애플리케이션이 아니라 기능을 만들기 위해 이용하는 라이브러리나 프레임워크 같은 종속성에 취약성이 있을 수 있다

<aside>
📌 **요약: 취약성에 주의하면서 시큐리티를 구성 해야 한다.**

</aside>

### 소주제

다양한 아키텍처에 적용된 보안

키워드

관련 질문

### 노트

- 백앤드/프런트앤드 분리를 위한 보안 설계
    - CSRF 및 CORS 구성은 일반적으로 더 복잡하다. 시스템을 수평적으로 확장하기를 원할 수 있는데, 반드시 백엔드와 같은 출처의 프런트엔드를 이용해야 하는 것은 아니다. 모바일 애플리케이션의 경우 출처를 확인할 수조차 없다
- OAuth2의 간략한 흐름 이해
    - OAuth 2 프레임워크는 권한 부여 서버와 리소스 서버라는 두 가지 별도의 엔티티를 정의한다. 권한 부여 서버의 목적은 사용자에게 권한을 부여하고 사용자의 이용 권리 집합을 지정하는 토큰을 제공하는 것이다. 이 기능을 구현하는 백엔드 부분을 리소스 서버라고 하며 호출할 수 있는 엔드포인트는 보호된 리소스로 볼 수 있다. 권한 부여를 수행한 후 획득한 토큰에 따라 리소스에 대한 호출이 허용되거나 거부된다
- API 키, 암호화 서명, IP 검증을 이용한 요청 보안
    - 요청 및 응답 헤더에 정적 키 사용
        - 가장 약한 접근법이다.
        - 키가 다르면 요청과 응답이 수락되지 않는다.
        - 일반적으로 IP 주소 허용 목록과 함께 결합한다.
    - 암호화 서명
        - 키로 요청과 응답에 서명하며 연결을 통해 키를 보낼 필요가 없다는 점에서 정적 권한 부여 값보다 이점이 있다.
        - 자신이 가진 키로 서명을 검증할 수 있다.
        - 두 개의 비대칭 키 쌍을 이용할 수 있고 개인 키는 교환 하지 않는다.(무슨 말이지? == 로그인 비대칭 보안?)
        - 처음 교환을 할 때는 대칭 키를 이용해야 해서 서명 계산에 많은 리소스를 소비함
    - IP 보안
        - 애플리케이션이 수락하도록 구성한 IP 주소 외의 주소에서 오는 요청을 거부한다

<aside>
📌 **요약:** 다양한 아키텍처에 적용된 보안을 적절히 사용하자

</aside>

### 소주제

이 책에서 배울 내용

키워드

관련 질문

### 노트

- 스프링 시큐리티를 배우는 실용적 접근법을 소개
- 스프링시큐리티의아키텍처와 기본구성요소 및이를 이용해애플리케이션을보호하는 방법
- OAuth 2 및 0penlD Connect 흐름을 비롯해 스프링 시큐리티로 인증과 권한부여를구헌하는방법과운영준비단게의애플리케이션에이를 적용하는 방법
- 애플리케이션의 다양한게층에서스프링시큐리티로보안을구현하는 방법
- 다양한구성스타일과프로젝트어 맞는 모범 사례
- 리액티브 애플리케이션에스프링 시큐리티 이용
- 보안 구현 테스트

<aside>
📌 **요약: 이론과 예제를 이용해 필수 개념을 익히고 스프링 시큐리티를 이해해야 한다.**

</aside>

## 1장 요약

- **스프링 시큐리티는 스프링 애플리케이션을 보호하기 위한 가장 인기 있는 선택이며 다양한 스타일과 아키텍처에 적용할 수 있는 갖가지 대안을 제공한다.**
- **시스템의 계층별로 보안을 적용해야 하며 계층별로 다른 관행을 이용해야 한다.**
- **보안은 소프트웨어프로젝트를 시작할 때부터 고려해야 하는 공통 관심사다.**
- **일반적으로 취약성을 예방하는 투자 비용보다 공격의 대가가 훨씬 크다.**
- **오픈 웹 애플리케이션 보안 프로젝트(OWASP)는 취약성과 보안 관련 사항을 참고할 수 있는 훌륭한 장소다.**
- **종종 아주 작은 실수 때문에 큰 피해가 발생한다. 예를 들어 로그나 오류 메시지에 민감한 데이터를 노출하는 것은 애플리케이션에 취약성을 만드는 흔한 실수다.**
